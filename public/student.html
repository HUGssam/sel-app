<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ì‚¬íšŒì •ì„œí•™ìŠµ(SEL) ì§„ë‹¨ - í•™ìƒìš©</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "ë§‘ì€ ê³ ë”•",
          sans-serif;
        margin: 0;
        padding: 0;
        background: #f5f5f5;
      }
      header {
        background: #2962ff;
        color: white;
        padding: 16px 20px;
        font-size: 20px;
        font-weight: 700;
      }
      main {
        padding: 16px 20px 40px;
        max-width: 900px;
        margin: 0 auto;
      }
      section {
        background: white;
        border-radius: 8px;
        padding: 16px 18px;
        margin-bottom: 16px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }
      h2 {
        margin: 0 0 10px;
        font-size: 18px;
      }
      .small-text {
        font-size: 13px;
        color: #555;
      }
      label {
        font-size: 14px;
      }
      input,
      select {
        font-size: 14px;
        padding: 6px 8px;
        margin-top: 4px;
      }
      .field-row {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        align-items: flex-end;
      }
      .field {
        display: flex;
        flex-direction: column;
        margin-bottom: 8px;
      }
      button {
        font-size: 14px;
        padding: 8px 14px;
        border-radius: 4px;
        border: none;
        cursor: pointer;
      }
      button.primary {
        background: #2962ff;
        color: white;
      }
      button.secondary {
        background: #e0e0e0;
      }
      .question {
        margin-bottom: 10px;
        padding: 10px 8px;
        border-bottom: 1px solid #eee;
      }
      .question-title {
        font-size: 14px;
        margin-bottom: 4px;
      }
      .options label {
        margin-right: 8px;
        font-size: 13px;
      }
      .result-box {
        background: #f3f6ff;
        border-radius: 6px;
        padding: 10px 12px;
        font-size: 14px;
      }
      .chip {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 999px;
        font-size: 12px;
        color: white;
      }
      .chip.red {
        background: #d32f2f;
      }
      .chip.yellow {
        background: #f9a825;
      }
      .chip.green {
        background: #388e3c;
      }
      textarea {
        width: 100%;
        box-sizing: border-box;
        font-size: 14px;
      }
      @media (max-width: 600px) {
        main {
          padding: 12px;
        }
        section {
          padding: 12px 14px;
        }
      }
    </style>
  </head>
  <body>
    <header>ì‚¬íšŒì •ì„œí•™ìŠµ(SEL) ì§„ë‹¨ - í•™ìƒìš©</header>

    <main>
      <!-- 1. ê¸°ë³¸ ì •ë³´ -->
      <section>
        <h2>1. ê¸°ë³¸ ì •ë³´</h2>
        <p class="small-text">
          ë‹´ì„ì„ ìƒë‹˜ì´ ì•ˆë‚´í•´ ì¤€ í˜•ì‹ëŒ€ë¡œ <strong>í•™ë…„Â·ë°˜Â·ë²ˆí˜¸(ì½”ë“œ)</strong>ë¥¼
          ì…ë ¥í•˜ì„¸ìš”. ì˜ˆ) <code>3-1-01</code>, <code>5-2-15</code> ë“±
        </p>
        <div class="field-row">
          <div class="field">
            <label>
              í•™ë…„ ê·¸ë£¹
              <select id="gradeGroup">
                <option value="34">3-4í•™ë…„</option>
                <option value="56">5-6í•™ë…„</option>
              </select>
            </label>
          </div>
          <div class="field" style="flex: 1 1 140px">
            <label>
              ì½”ë“œ (í•™ë…„-ë°˜-ë²ˆí˜¸)
              <input
                id="studentCode"
                placeholder="ì˜ˆ: 3-1-01"
                maxlength="10"
                style="width: 150px"
              />
            </label>
          </div>
          <div class="field">
            <button class="primary" id="startBtn">ì§„ë‹¨ ì‹œì‘í•˜ê¸°</button>
          </div>
        </div>
      </section>

      <!-- 2. ë¬¸í•­ ì˜ì—­ -->
      <section id="questionSection" style="display: none">
        <h2>2. ë¬¸í•­ì— ë‹µí•´ ì£¼ì„¸ìš”</h2>
        <p class="small-text">
          ì•„ë˜ ë¬¸ì¥ì„ ì½ê³ , <strong>ë‚˜ì™€ ê°€ì¥ ë¹„ìŠ·í•œ ì •ë„</strong>ë¥¼ ê³ ë¥´ì„¸ìš”.
          <br />
          (1ì : ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤ / 2ì : ê°€ë” ê·¸ë ‡ë‹¤ / 3ì : ìì£¼ ê·¸ë ‡ë‹¤ / 4ì :
          í•­ìƒ ê·¸ë ‡ë‹¤)
        </p>
        <div id="questionList"></div>
        <button class="primary" id="submitBtn">ê²°ê³¼ ë³´ê¸°</button>
      </section>

      <!-- 3. ê²°ê³¼ ì˜ì—­ -->
      <section id="resultSection" style="display: none">
        <h2>3. ë‚˜ì˜ SEL ê²°ê³¼</h2>
        <div class="result-box" id="resultBox"></div>

        <h3 style="margin-top: 18px; margin-bottom: 6px">
          ì˜¤ëŠ˜ì„ ëŒì•„ë³´ëŠ” í•œ ë¬¸ì¥
        </h3>
        <p id="summarySentence" style="font-size: 14px; white-space: pre-line"></p>

        <p class="small-text" style="margin-top: 10px">
          * ê²°ê³¼ëŠ” ë‚˜ì˜ ê¸°ë¶„ê³¼ í–‰ë™ì„ ëŒì•„ë³´ëŠ” ì°¸ê³ ìë£Œì˜ˆìš”. ì˜í•˜ëŠ” ì ì€ ê³„ì†
          ì‚´ë¦¬ê³ , ì–´ë µë‹¤ê³  ëŠê»´ì§€ëŠ” ë¶€ë¶„ì€ ì„ ìƒë‹˜ê³¼ í•¨ê»˜ ì²œì²œíˆ ì—°ìŠµí•´ë³´ì„¸ìš”.
        </p>

        <div style="margin-top: 12px">
          <button class="primary" id="saveBtn">ì„ ìƒë‹˜ê»˜ ê²°ê³¼ ë³´ë‚´ê¸°</button>
          <button class="secondary" id="restartBtn">ì²˜ìŒìœ¼ë¡œ</button>
        </div>
      </section>
    </main>

    <script>
      // -----------------------------
      // 0. ë¬¸í•­ ì •ì˜
      // -----------------------------
      const questions34 = [
        // ìê¸° ì¸ì‹ (ë‹¨ì¼ ê°ì •)
        {
          domain: "ìê¸° ì¸ì‹",
          text: "ë‚˜ëŠ” ìš”ì¦˜ ê¸°ë¶„ì´ ì–´ë–¤ì§€ ìŠ¤ìŠ¤ë¡œ ì˜ ë§í•  ìˆ˜ ìˆë‹¤.",
        },
        {
          domain: "ìê¸° ì¸ì‹",
          text: "ë‚˜ëŠ” í™”ë‚¨, ìŠ¬í””, ê¸°ì¨ ê°™ì€ ê°ì •ì„ êµ¬ë³„í•´ì„œ ë§í•  ìˆ˜ ìˆë‹¤.",
        },
        // ìê¸° ê´€ë¦¬
        {
          domain: "ìê¸° ê´€ë¦¬",
          text: "ë‚˜ëŠ” í™”ê°€ ë‚  ë•Œ, ê¹Šê²Œ ìˆ¨ ì‰¬ê¸° ê°™ì€ ë°©ë²•ìœ¼ë¡œ ìŠ¤ìŠ¤ë¡œë¥¼ ì§„ì •ì‹œí‚¬ ìˆ˜ ìˆë‹¤.",
        },
        {
          domain: "ìê¸° ê´€ë¦¬",
          text: "ë‚˜ëŠ” í•´ì•¼ í•  ì¼ì„ ë¯¸ë£¨ì§€ ì•Šìœ¼ë ¤ê³  ë…¸ë ¥í•œë‹¤.",
        },
        // ì‚¬íšŒì  ì¸ì‹
        {
          domain: "ì‚¬íšŒì  ì¸ì‹",
          text: "ë‚˜ëŠ” ì¹œêµ¬ì˜ í‘œì •ì´ë‚˜ ë§íˆ¬ë¥¼ ë³´ê³  ê¸°ë¶„ì„ ì§ì‘í•  ìˆ˜ ìˆë‹¤.",
        },
        {
          domain: "ì‚¬íšŒì  ì¸ì‹",
          text: "ë‚˜ëŠ” ë‹¤ë¥¸ ì¹œêµ¬ì˜ ì…ì¥ì—ì„œ ìƒê°í•´ ë³´ë ¤ê³  ë…¸ë ¥í•œë‹¤.",
        },
        // ì‚¬íšŒì  í˜‘ë ¥
        {
          domain: "ì‚¬íšŒì  í˜‘ë ¥",
          text: "ë‚˜ëŠ” ëª¨ë‘  í™œë™ì—ì„œ ì¹œêµ¬ë“¤ê³¼ ì°¨ë¡€ë¥¼ ì§€í‚¤ë©° ì´ì•¼ê¸°í•œë‹¤.",
        },
        {
          domain: "ì‚¬íšŒì  í˜‘ë ¥",
          text: "ë‚˜ëŠ” ì¹œêµ¬ì™€ ì˜ê²¬ì´ ë‹¬ë¼ë„ ë§ë¡œ ì¡°ì ˆí•˜ë ¤ê³  í•œë‹¤.",
        },
        // ì±…ì„ ìˆëŠ” ì˜ì‚¬ê²°ì •
        {
          domain: "ì±…ì„ ìˆëŠ” ì˜ì‚¬ê²°ì •",
          text: "ë‚˜ëŠ” í•œ í–‰ë™ì´ ì¹œêµ¬ì—ê²Œ ì–´ë–¤ ì˜í–¥ì„ ì¤„ì§€ ìƒê°í•´ ë³¸ë‹¤.",
        },
        {
          domain: "ì±…ì„ ìˆëŠ” ì˜ì‚¬ê²°ì •",
          text: "ë‚˜ëŠ” ì˜ëª»í–ˆì„ ë•Œ ì‚¬ê³¼í•  ìˆ˜ ìˆë‹¤.",
        },
      ];

      const questions56 = [
        // ìê¸° ì¸ì‹ (ë‹¨ì¼ + ë³µí•© ê°ì •)
        {
          domain: "ìê¸° ì¸ì‹",
          text: "ë‚˜ëŠ” ê¸°ì¨, ìŠ¬í””, í™”ë‚¨, ê±±ì • ê°™ì€ ê°ì •ì„ êµ¬ë³„í•´ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.",
        },
        {
          domain: "ìê¸° ì¸ì‹",
          text: "ë‚˜ëŠ” í•œ ìƒí™©ì—ì„œ ì—¬ëŸ¬ ê°ì •(ì˜ˆ: ê¸°ì˜ì§€ë§Œ ê±±ì •ë¨)ì„ í•¨ê»˜ ëŠë‚„ ìˆ˜ ìˆìŒì„ ì•Œê³  ìˆë‹¤.",
        },
        // ìê¸° ê´€ë¦¬
        {
          domain: "ìê¸° ê´€ë¦¬",
          text: "ë‚˜ëŠ” ê°ì • ë•Œë¬¸ì— ì‹¤ìˆ˜í–ˆì„ ë•Œ, ë‹¤ìŒì—ëŠ” ì–´ë–»ê²Œ í• ì§€ ìŠ¤ìŠ¤ë¡œ ê³„íšì„ ì„¸ìš´ë‹¤.",
        },
        {
          domain: "ìê¸° ê´€ë¦¬",
          text: "ë‚˜ëŠ” ìŠ¤ìŠ¤ë¡œ ì •í•œ ëª©í‘œ(ì˜ˆ: ê³µë¶€, ìš´ë™)ë¥¼ ê¾¸ì¤€íˆ ì§€í‚¤ë ¤ê³  ë…¸ë ¥í•œë‹¤.",
        },
        // ì‚¬íšŒì  ì¸ì‹
        {
          domain: "ì‚¬íšŒì  ì¸ì‹",
          text: "ë‚˜ëŠ” ì¹œêµ¬ì˜ ë§ê³¼ í–‰ë™ì—ì„œ ìˆ¨ê²¨ì§„ ê°ì •ì„ ì½ìœ¼ë ¤ê³  í•œë‹¤.",
        },
        {
          domain: "ì‚¬íšŒì  ì¸ì‹",
          text: "ë‚˜ëŠ” ë‚˜ì™€ ë‹¤ë¥¸ ìƒê°ì„ ê°€ì§„ ì‚¬ëŒì˜ ì…ì¥ì„ ìƒìƒí•´ ë³¸ë‹¤.",
        },
        // ì‚¬íšŒì  í˜‘ë ¥
        {
          domain: "ì‚¬íšŒì  í˜‘ë ¥",
          text: "ë‚˜ëŠ” ëª¨ë‘  í™œë™ì—ì„œ ì—­í• ì„ ë‚˜ëˆ„ê³  ì„œë¡œ ë„ì™€ê°€ë©° ì¼ì„ ì§„í–‰í•œë‹¤.",
        },
        {
          domain: "ì‚¬íšŒì  í˜‘ë ¥",
          text: "ë‚˜ëŠ” ì¹œêµ¬ì™€ ê°ˆë“±ì´ ìƒê²¼ì„ ë•Œ, ì‹¸ìš°ê¸°ë³´ë‹¤ ëŒ€í™”ë¡œ í•´ê²°í•˜ë ¤ê³  í•œë‹¤.",
        },
        // ì±…ì„ ìˆëŠ” ì˜ì‚¬ê²°ì •
        {
          domain: "ì±…ì„ ìˆëŠ” ì˜ì‚¬ê²°ì •",
          text: "ë‚˜ëŠ” ë‚´ê°€ ë‚´ë¦° ê²°ì •ì´ ë‚˜ì™€ ì¹œêµ¬ì—ê²Œ ì–´ë–¤ ì˜í–¥ì„ ì¤„ì§€ ìƒê°í•´ ë³¸ë‹¤.",
        },
        {
          domain: "ì±…ì„ ìˆëŠ” ì˜ì‚¬ê²°ì •",
          text: "ë‚˜ëŠ” ì¸í„°ë„·/ë©”ì‹ ì €ì—ì„œ ìƒëŒ€ë¥¼ ì¡´ì¤‘í•˜ë©° í–‰ë™í•˜ë ¤ê³  í•œë‹¤.",
        },
      ];

      const gradeGroupEl = document.getElementById("gradeGroup");
      const studentCodeEl = document.getElementById("studentCode");
      const startBtn = document.getElementById("startBtn");
      const questionSection = document.getElementById("questionSection");
      const questionListEl = document.getElementById("questionList");
      const submitBtn = document.getElementById("submitBtn");
      const resultSection = document.getElementById("resultSection");
      const resultBox = document.getElementById("resultBox");
      const summarySentenceEl = document.getElementById("summarySentence");
      const saveBtn = document.getElementById("saveBtn");
      const restartBtn = document.getElementById("restartBtn");

      let currentQuestions = [];
      let currentAnswers = [];
      let currentOverallLevel = "";
      let currentDomainLevels = {};
      let currentSummarySentence = "";

      // -----------------------------
      // 1. ì§„ë‹¨ ì‹œì‘ ë²„íŠ¼
      // -----------------------------
      startBtn.addEventListener("click", () => {
        const code = studentCodeEl.value.trim();
        if (!code) {
          alert("ì½”ë“œë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”. (ì˜ˆ: 3-1-01)");
          studentCodeEl.focus();
          return;
        }
        const group = gradeGroupEl.value;
        currentQuestions = group === "34" ? questions34 : questions56;

        renderQuestions();
        questionSection.style.display = "block";
        resultSection.style.display = "none";
        window.scrollTo({ top: questionSection.offsetTop - 10, behavior: "smooth" });
      });

      // -----------------------------
      // 2. ë¬¸í•­ ë Œë”ë§
      // -----------------------------
      function renderQuestions() {
        questionListEl.innerHTML = "";
        currentAnswers = new Array(currentQuestions.length).fill(null);

        currentQuestions.forEach((q, index) => {
          const div = document.createElement("div");
          div.className = "question";

          const title = document.createElement("div");
          title.className = "question-title";
          title.textContent = `${index + 1}. ${q.text}`;
          div.appendChild(title);

          const options = document.createElement("div");
          options.className = "options";

          [1, 2, 3, 4].forEach((score) => {
            const id = `q${index}_${score}`;
            const label = document.createElement("label");
            label.setAttribute("for", id);

            const radio = document.createElement("input");
            radio.type = "radio";
            radio.name = `q${index}`;
            radio.id = id;
            radio.value = String(score);
            radio.addEventListener("change", () => {
              currentAnswers[index] = score;
            });

            label.appendChild(radio);
            label.appendChild(
              document.createTextNode(
                score === 1
                  ? "1ì "
                  : score === 2
                  ? "2ì "
                  : score === 3
                  ? "3ì "
                  : "4ì "
              )
            );
            options.appendChild(label);
          });

          div.appendChild(options);
          questionListEl.appendChild(div);
        });
      }

      // -----------------------------
      // 3. ê²°ê³¼ ê³„ì‚°
      // -----------------------------
      submitBtn.addEventListener("click", () => {
        if (currentAnswers.some((v) => v === null)) {
          alert("ì•„ì§ ë‹µí•˜ì§€ ì•Šì€ ë¬¸í•­ì´ ìˆìŠµë‹ˆë‹¤.");
          return;
        }

        const group = gradeGroupEl.value;
        const totalScore = currentAnswers.reduce((a, b) => a + b, 0);
        const maxScore = currentAnswers.length * 4;
        const ratio = totalScore / maxScore;

        let overallLevel = "yellow";
        if (ratio < 0.45) overallLevel = "red";
        else if (ratio > 0.75) overallLevel = "green";

        currentOverallLevel = overallLevel;

        // ì˜ì—­ë³„ ì ìˆ˜
        const domainScores = {};
        currentQuestions.forEach((q, i) => {
          if (!domainScores[q.domain]) {
            domainScores[q.domain] = { sum: 0, count: 0 };
          }
          domainScores[q.domain].sum += currentAnswers[i];
          domainScores[q.domain].count += 1;
        });

        const domainLevels = {};
        Object.keys(domainScores).forEach((domain) => {
          const avg = domainScores[domain].sum / domainScores[domain].count;
          let level = "ë…¸ë€ë¶ˆ";
          if (avg < 2) level = "ë¹¨ê°„ë¶ˆ";
          else if (avg >= 3.2) level = "ì´ˆë¡ë¶ˆ";
          domainLevels[domain] = { avg, level };
        });

        currentDomainLevels = {};

        Object.keys(domainLevels).forEach((k) => {
          const v = domainLevels[k];
          if (v.level === "ë¹¨ê°„ë¶ˆ") currentDomainLevels[k] = "red";
          else if (v.level === "ì´ˆë¡ë¶ˆ") currentDomainLevels[k] = "green";
          else currentDomainLevels[k] = "yellow";
        });

        // í™”ë©´ í‘œì‹œìš© í…ìŠ¤íŠ¸
        let html = `<div>ë‚˜ì˜ ì „ì²´ SEL ì‹ í˜¸ë“±ì€ 
          <span class="chip ${overallLevel}">${
          overallLevel === "green"
            ? "ì´ˆë¡ë¶ˆ"
            : overallLevel === "yellow"
            ? "ë…¸ë€ë¶ˆ"
            : "ë¹¨ê°„ë¶ˆ"
        }</span> ì…ë‹ˆë‹¤.</div>`;

        html += `<div class="small-text" style="margin-top:4px;">(ì ìˆ˜ê°€ ë†’ì„ìˆ˜ë¡ í•´ë‹¹ ì—­ëŸ‰ì„ ë” ì˜ ì‚¬ìš©í•˜ê³  ìˆë‹¤ëŠ” ëœ»ì´ì—ìš”.)</div>`;

        html += `<ul style="margin-top:8px; padding-left:18px;">`;
        Object.keys(domainLevels).forEach((domain) => {
          const info = domainLevels[domain];
          html += `<li>${domain}: <strong>${info.level}</strong> (í‰ê·  ${info.avg.toFixed(
            1
          )}ì )</li>`;
        });
        html += `</ul>`;

        resultBox.innerHTML = html;

        // í•œ ë¬¸ì¥ ìš”ì•½ ë§Œë“¤ê¸°
        const summary = buildSummarySentence(
          overallLevel,
          currentDomainLevels,
          group
        );
        currentSummarySentence = summary;
        summarySentenceEl.textContent = summary;

        resultSection.style.display = "block";
        window.scrollTo({ top: resultSection.offsetTop - 10, behavior: "smooth" });
      });

      // -----------------------------
      // 4. í•œ ë¬¸ì¥ ìš”ì•½ ë§Œë“¤ê¸°
      // -----------------------------
      function buildSummarySentence(overall, domainLevels, gradeGroup) {
        const strengths = [];
        const needs = [];

        Object.keys(domainLevels).forEach((d) => {
          const lv = domainLevels[d];
          if (lv === "green") strengths.push(d);
          else if (lv === "red") needs.push(d);
        });

        let line1 = "";
        if (overall === "green") {
          line1 =
            "ë„¤ ê°ì •ê³¼ í–‰ë™ì„ ê½¤ ì˜ ì¡°ì ˆí•˜ê³  ìˆëŠ” í¸ì´ì—ìš”. ìŠ¤ìŠ¤ë¡œë¥¼ ì˜ ëŒë³´ê³  ìˆë‹¤ëŠ” ëœ»ì´ì—ìš”.";
        } else if (overall === "yellow") {
          line1 =
            "ë‚´ ê°ì •ê³¼ í–‰ë™ì„ ì–´ëŠ ì •ë„ ì•Œê³  ìˆì§€ë§Œ, ë” ì—°ìŠµí•˜ë©´ í›¨ì”¬ í¸í•´ì§ˆ ìˆ˜ ìˆì–´ìš”.";
        } else {
          line1 =
            "ìš”ì¦˜ ê°ì •ê³¼ í–‰ë™ ë•Œë¬¸ì— ì¡°ê¸ˆ í˜ë“¤ ìˆ˜ ìˆì–´ìš”. ê´œì°®ì•„ìš”, ì²œì²œíˆ ì—°ìŠµí•˜ë©´ ì ì  ë‚˜ì•„ì§ˆ ìˆ˜ ìˆì–´ìš”.";
        }

        let line2 = "";
        if (strengths.length) {
          line2 += `íŠ¹íˆ ${strengths.join(
            ", "
          )} ì˜ì—­ì—ì„œ ê°•ì ì„ ë³´ì´ê³  ìˆì–´ìš”. ì´ ë¶€ë¶„ì€ ê³„ì† ì‚´ë ¤ ë³´ì„¸ìš”.`;
        }

        let line3 = "";
        if (needs.length) {
          line3 += `ë˜ ${needs.join(
            ", "
          )} ì˜ì—­ì€ í•¨ê»˜ ì—°ìŠµí•˜ë©´ ë” í¸í•´ì§ˆ ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ì—ìš”. ë„ì›€ì´ í•„ìš”í•  ë•Œ ì„ ìƒë‹˜, ê°€ì¡±, ì¹œêµ¬ì—ê²Œ ì†”ì§í•˜ê²Œ ì´ì•¼ê¸°í•´ ë³´ì„¸ìš”.`;
        }

        if (!strengths.length && !needs.length) {
          line2 =
            "ì•„ì§ì€ ê°•ì ê³¼ ì–´ë ¤ìš´ ë¶€ë¶„ì´ ëšœë ·í•˜ê²Œ ë‚˜ë‰˜ì§€ ì•Šì•„ìš”. ì•ìœ¼ë¡œì˜ ê²½í—˜ì„ í†µí•´ ì°¨ë¶„íˆ ì•Œì•„ê°€ë©´ ë¼ìš”.";
        }

        return [line1, line2, line3].filter(Boolean).join("\n\n");
      }

      // -----------------------------
      // 5. ê²°ê³¼ ì €ì¥ (ì„œë²„ë¡œ ì „ì†¡)
//      â†’ summaryText ê°™ì´ ë³´ëƒ„!!
// -----------------------------
      saveBtn.addEventListener("click", async () => {
        const studentCode = studentCodeEl.value.trim();
        const gradeGroup = gradeGroupEl.value;

        if (!studentCode) {
          alert("ì½”ë“œë¥¼ ë‹¤ì‹œ í™•ì¸í•´ ì£¼ì„¸ìš”.");
          return;
        }

        try {
          const payload = {
            studentCode,
            gradeGroup,
            answers: currentAnswers,
            resultType: "overall",
            overallLevel: currentOverallLevel,
            domainLevels: currentDomainLevels,
            summaryText: currentSummarySentence, // ğŸ“Œ í•œ ë¬¸ì¥ ìš”ì•½ ê°™ì´ ë³´ëƒ„
          };

          const res = await fetch("/api/sel/results", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload),
          });

          if (!res.ok) throw new Error("save failed");
          alert("ì„ ìƒë‹˜ê»˜ ê²°ê³¼ê°€ ì˜ ì „ë‹¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
        } catch (err) {
          console.error(err);
          alert("ê²°ê³¼ë¥¼ ì €ì¥í•˜ëŠ” ì¤‘ ë¬¸ì œê°€ ìƒê²¼ì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
        }
      });

      // -----------------------------
      // 6. ì²˜ìŒìœ¼ë¡œ
      // -----------------------------
      restartBtn.addEventListener("click", () => {
        resultSection.style.display = "none";
        questionSection.style.display = "none";
        currentAnswers = [];
        currentQuestions = [];
        studentCodeEl.value = "";
        gradeGroupEl.value = "34";
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    </script>
  </body>
</html>
